buildscript {
  repositories {
    mavenCentral()
  }

  dependencies {
    classpath group: "net.carlosgsouza", name: "gradle-console", version: "1.+"
  }
}

apply plugin: "java"
apply plugin: "application"
apply plugin: "checkstyle"
apply plugin: "console"

repositories {
  mavenCentral()
}

dependencies {
  testCompile group: "junit", name: "junit", version: "4.+"
}

def configDir = new File(buildscript.sourceFile.parentFile, 'config')

ext.checkstyleConfigDir = "$configDir/checkstyle"

checkstyle {
    configFile = new File(checkstyleConfigDir, "checkstyle.xml")
    configProperties.checkstyleConfigDir = checkstyleConfigDir
}

test {
    afterTest { desc, result -> 
        println "Executed test ${desc.name} [${desc.className}] with result: ${result.resultType}"
    }
}

mainClassName = "javakata.Main"

jar {
  manifest {
    attributes(
      'Class-Path': configurations.compile.collect { it.getName() }.join(' '),
      'Main-Class': 'javakata.Main'
    )
  }
}